<head>
    <html>
        <meta charset="utf8">
    </html>
</head>

<body>
    <!--Implémenter un décodeur de chiffre César
    -->
    <script>
       
       // créer un prompt pour demander une phrase
       // la coder
       // créer un prompt pour entrer une phrase codée
       // créer un prompt qui demande la réponse
       // le tout dans une boucle pour retenter le test avec une sortie demandée par l'utilisateur
       
       let phrase = prompt("entrez une phrase");
       let maj = phrase.toLowerCase();
       let chaine = "";
       for (let i = 0; i < maj.length; i++) {
        if ((maj[i] === "é") || (maj[i] === "è") || (maj[i] === "ê") || (maj[i] === "ë")) {
                chaine = chaine + "e";
            } else if (maj[i] === "à") {
                chaine = chaine + "a";
            } else if (maj[i] === "ö" || maj[i] === "ô") {
                chaine = chaine + "o";
            } else if (maj[i] === "ù") {
                chaine = chaine + "u";
            } else {
                chaine = chaine + maj[i];
            }
       }
       let alphabet = ("abcdefghijklmnopqrstuvwxyz");
       let decalage = Math.floor(Math.random() * 10);
       let cesar = "";
       // appliquer le codage César
       for (let i = 0; i < chaine.length; i++) { // on parcourt la chaine chaine
       // si les caractères ne sont pas dans l'alphabet (chiffres et espace)
           if (chaine[i] === " " || chaine[i] === "0" || chaine[i] === "1" || chaine[i] === "2" || chaine[i] === "3" || chaine[i] === "4" || chaine[i] === "5" || chaine[i] === "6" || chaine[i] === "7" || chaine[i] === "8" || chaine[i] === "9" || chaine[i] === "'" || chaine[i] === "-") { 
               cesar = cesar + chaine[i];
           } else {
            for (let j = 0; j < alphabet.length; j++) { // on parcourt la chaine alphabet
               if (chaine[i] === alphabet[j]) {
                    if ((j + decalage) <= alphabet.length) { // si en ajoutant la place de la lettre on ne dépasse pas z
                        cesar = cesar + alphabet[j + decalage];
                    } else if ((j + decalage) > alphabet.length) { // si on dépasse z
                        cesar = cesar + alphabet[j + decalage - alphabet.length];
                    } 
               } 
           }
           }           
       }
       console.log(cesar);

       
       let boucle = true; // tant que boucle est true la boucle continue
       while (boucle) {
            let continu = prompt("voulez-vous essayer de décoder ? (o) oui (n) non");
            if (continu === "n") { // on sort de la boucle
                boucle = false;
            } else if (continu !== "o" && continu !== "n") { // si entre un caractère non demandé
                alert("mauvais caractère entré");
            } else if(continu === "o") { // si oui on continue les essais
                
                let cle = (prompt('entrez la phrase décodée')); // pour connaitre le nombre de déplacements des lettres
                if (cle === chaine) {
                    console.log("GAGNE !!!");
                    console.log(cle);
                    cle = "";
                } else {
                    console.log("PERDU !!!");
                    console.log(cle);
                    cle = "";
                }

            }
       }

    </script>
</body>

</html>